<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Gold Market | Voice Bot AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes gold-spin { 0% { transform: rotateY(0deg); } 100% { transform: rotateY(360deg); } }
        @keyframes wave { 0%, 100% { height: 10px; } 50% { height: 40px; } }
        
        body { background: #fdfdfd; margin: 0; font-family: sans-serif; overflow-x: hidden; }
        
        #product-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            padding: 100px 15px;
            transition: transform 0.1s linear;
        }

        .product-card {
            background: white;
            border-radius: 20px;
            border: 1px solid #eee;
            padding: 20px 10px;
            text-align: center;
            transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .search-focus {
            border: 4px solid #eab308 !important;
            transform: scale(1.15) rotate(2deg);
            z-index: 10;
        }

        /* Voice Bot Overlay */
        #bot-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(255,255,255,0.98);
            z-index: 2000;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .voice-wave {
            display: flex;
            align-items: center;
            gap: 5px;
            height: 50px;
        }

        .bar {
            width: 6px;
            background: #eab308;
            border-radius: 3px;
            animation: wave 1s infinite ease-in-out;
        }
    </style>
</head>
<body class="text-slate-900">

    <div id="bot-overlay">
        <div class="voice-wave">
            <div class="bar" style="animation-delay: 0.1s"></div>
            <div class="bar" style="animation-delay: 0.2s"></div>
            <div class="bar" style="animation-delay: 0.3s"></div>
            <div class="bar" style="animation-delay: 0.4s"></div>
            <div class="bar" style="animation-delay: 0.5s"></div>
        </div>
        <h2 id="bot-text" class="text-xl font-black mt-8 uppercase text-yellow-600 tracking-tighter">AI Assistant Active</h2>
        <p id="bot-subtext" class="text-slate-400 mt-2 font-bold">Listening...</p>
    </div>

    <header class="fixed top-0 w-full z-50 bg-white/95 backdrop-blur-md p-4 flex justify-between items-center border-b">
        <div class="flex flex-col">
            <span class="font-black text-yellow-600 text-lg uppercase">Gold Market</span>
            <span class="text-[7px] font-bold text-slate-400">SHAKE 2 TIMES TO TALK</span>
        </div>
        <button onclick="requestAccess()" id="mainBtn" class="bg-black text-white text-[10px] px-6 py-2 rounded-full font-black">START AI</button>
    </header>

    <main><div id="product-grid"></div></main>

    <footer class="w-full p-10 bg-white border-t text-center">
        <p class="text-yellow-600 font-black text-xl">omkargore544</p>
    </footer>

    <script>
        const items = [
            {n:"iPhone", i:"ðŸ“±", p:79900}, {n:"Milk", i:"ðŸ¥›", p:66}, {n:"Apple", i:"ðŸŽ", p:150},
            {n:"Watch", i:"âŒš", p:25000}, {n:"Bread", i:"ðŸž", p:45}, {n:"Honey", i:"ðŸ¯", p:400},
            {n:"Laptop", i:"ðŸ’»", p:85000}, {n:"Shoes", i:"ðŸ‘Ÿ", p:3500}, {n:"Grapes", i:"ðŸ‡", p:120},
            {n:"Ring", i:"ðŸ’", p:45000}, {n:"Banana", i:"ðŸŒ", p:60}, {n:"Headphones", i:"ðŸŽ§", p:5000}
        ];

        const grid = document.getElementById('product-grid');
        items.forEach(item => {
            const div = document.createElement('div');
            div.className = "product-card";
            div.id = `item-${item.n.toLowerCase()}`;
            div.innerHTML = `
                <div class="text-6xl my-4" style="animation: gold-spin 6s linear infinite">${item.i}</div>
                <div class="font-bold text-xs text-slate-400 uppercase">${item.n}</div>
                <div class="text-lg font-black text-slate-900">â‚¹${item.p.toLocaleString('en-IN')}</div>
            `;
            grid.appendChild(div);
        });

        let active = false;
        let shakeCount = 0;
        let lastShakeTime = 0;

        async function requestAccess() {
            if (typeof DeviceOrientationEvent.requestPermission === 'function') {
                await DeviceOrientationEvent.requestPermission();
                await DeviceMotionEvent.requestPermission();
            }
            active = true;
            document.getElementById('mainBtn').innerText = "AI ONLINE";
            document.getElementById('mainBtn').style.background = "#22c55e";
            initSensors();
        }

        function initSensors() {
            // Shake Detection (Detect 2 shakes)
            window.addEventListener('devicemotion', (e) => {
                let acc = e.accelerationIncludingGravity;
                if (Math.abs(acc.x) > 20) {
                    let now = Date.now();
                    if (now - lastShakeTime > 500) {
                        shakeCount++;
                        lastShakeTime = now;
                        if (shakeCount >= 2) {
                            shakeCount = 0;
                            startVoiceBot();
                        }
                    }
                }
            });

            // Tilt Scroll
            window.addEventListener('deviceorientation', (e) => {
                window.scrollBy(0, (e.beta - 45) * 0.4);
            });
        }

        // --- VOICE BOT LOGIC ---
        const synth = window.speechSynthesis;
        const Recognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        const rec = new Recognition();
        rec.lang = 'en-IN';

        function speak(text, callback) {
            const utter = new SpeechSynthesisUtterance(text);
            utter.onend = callback;
            synth.speak(utter);
        }

        function startVoiceBot() {
            if (synth.speaking) return;
            
            const overlay = document.getElementById('bot-overlay');
            overlay.style.display = 'flex';
            
            speak("Namaste! Which product are you looking for?", () => {
                rec.start();
            });

            rec.onresult = (event) => {
                const query = event.results[0][0].transcript.toLowerCase();
                document.getElementById('bot-subtext').innerText = "Searching for: " + query;
                
                const found = items.find(i => query.includes(i.n.toLowerCase()));
                
                if (found) {
                    speak("I found " + found.n + " for you.", () => {
                        overlay.style.display = 'none';
                        const el = document.getElementById(`item-${found.n.toLowerCase()}`);
                        document.querySelectorAll('.product-card').forEach(c => c.classList.remove('search-focus'));
                        el.classList.add('search-focus');
                        el.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    });
                } else {
                    speak("Sorry, I don't have that item.", () => { overlay.style.display = 'none'; });
                }
            };

            rec.onerror = () => { overlay.style.display = 'none'; };
        }
    </script>
</body>
</html>